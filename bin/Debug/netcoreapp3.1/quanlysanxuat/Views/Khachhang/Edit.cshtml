@using QuanLySanXuat.Entities;
@model QuanLySanXuat.Entities.KhachhangViewModel


@{
    Layout = "_Layout";
    ProductionManagementSoftwareContext _context = new ProductionManagementSoftwareContext();

    List<Nhanvien> nhanvien = _context.Nhanvien.Where(n => n.Active == 1).ToList();

}


<form asp-action="Edit" asp-controller="Khachhang" method="post" enctype="multipart/form-data">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input type="hidden" asp-for="Idkh" />
    <div class="bg-light p-1 border border-secondary rounded">
        <h2>Cập Nhật Thông Tin Khách Hàng</h2>

        <div class="row">
            <div class="col-md-2 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-4 col-sm-12">
                        Mã KH
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <input asp-for="Makh" id="Makh" maxlength="255" onfocus="this.value=''" type="text"
                               class="form-control">
                        <span asp-validation-for="Makh" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Tên KH
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input asp-for="Tenkh" id="Tenkh" onfocus="this.value=''" maxlength="255" type="text"
                               class="form-control">
                        <span asp-validation-for="Tenkh" class="text-danger"></span>

                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Email
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input id="Email" asp-for="Email" onfocus="this.value=''" maxlength="255" type="text"
                               class="form-control">
                        <span asp-validation-for="Email" class="text-danger"></span>


                    </div>
                </div>
            </div>




        </div>

        <div class="row mt-2">
            <div class="col-md-2 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-4 col-sm-12">
                        SĐT
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <input type="text" asp-for="Sdt" id="Sdt" maxlength="255" onfocus="this.value=''"
                               class="form-control">
                        <span asp-validation-for="Sdt" class="text-danger"></span>


                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Địa Chỉ
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input type="text" asp-for="Diachi" onfocus="this.value=''" maxlength="255" id="Diachi"
                               class="form-control">
                        <span asp-validation-for="Diachi" class="text-danger"></span>


                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Ghi chú
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <textarea asp-for="Ghichu" id="Ghichu" onfocus="this.value=''" row="" maxlength="4000"
                                  style="height:10px;" class="form-control"></textarea>
                        <span asp-validation-for="Ghichu" class="text-danger"></span>

                    </div>
                </div>
            </div>


        </div>

        <div class="row mt-2">
            <div class="col-md-2 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-4 col-sm-12">
                        Giới tính
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <select asp-for="Gioitinh" id="Gioitinh">
                            <option value="Nam">Nam</option>
                            <option value="Nữ">Nữ</option>
                            <option value="Khác">Khác</option>
                        </select>

                    </div>
                </div>
            </div>

            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        CCCD
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input asp-for="Cccd" id="Cccd" onfocus="this.value=''" maxlength="255" type="text"
                               class="form-control">
                        <span asp-validation-for="Cccd" class="text-danger"></span>

                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">


                    <div class="col-md-2 col-sm-12">
                        Ng.Sinh
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input type="date" id="Ngaysinh" onfocus="this.value=''" asp-for="Ngaysinh" maxlength="255"
                               class="form-control">
                        <span asp-validation-for="Ngaysinh" class="text-danger"></span>

                    </div>
                </div>
            </div>

        </div>

        <div class="row mt-2">
            <div class="col-md-2 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-4 col-sm-12">
                        M.Khẩu
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <input type="text" id="Matkhau" onfocus="this.value=''" asp-for="Matkhau" maxlength="255"
                               class="form-control">
                        <span asp-validation-for="Matkhau" class="text-danger"></span>

                    </div>
                </div>
            </div>

            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Hình ảnh
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input asp-for="Hinhanh" type='file' onchange="readURL(this); " class="form-control" />

                        <span asp-validation-for="Hinhanh" class="text-danger"></span>

                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">

                    <div class="col-md-2 col-sm-12">
                        NV Sale
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <div class="form-group ">

                            <select asp-for="Nvidsale" id="multipleSelect" data-search="true"
                                    data-silent-initial-value-set="true">
                                @foreach (var item in nhanvien)
                                {
                                    <option value="">Không</option>
                                    <option value="@item.Idnv">@item.Tennv</option>
                                }

                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-2">
            <div class="col-md-2 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-4 col-sm-12">
                        Số Thuế
                    </div>
                    <div class="col-md-8 col-sm-12">
                        <input type="text" asp-for="Masothue" onfocus="this.value=''" maxlength="255" id="Masothue"
                               class="form-control">
                        <span asp-validation-for="Masothue" class="text-danger"></span>
                    </div>
                </div>
            </div>

            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Facebook
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input type="text" asp-for="Facebook" onfocus="this.value=''" id="Facebook" maxlength="255"
                               class="form-control">
                        <span asp-validation-for="Facebook" class="text-danger"></span>

                    </div>
                </div>
            </div>
            <div class="col-md-5 col-sm-12">
                <div class="row d-flex align-items-center">
                    <div class="col-md-2 col-sm-12">
                        Zalo
                    </div>
                    <div class="col-md-10 col-sm-12">
                        <input type="text" id="Zalo" onfocus="this.value=''" asp-for="Zalo" maxlength="255"
                               class="form-control">
                        <span asp-validation-for="Zalo" class="text-danger"></span>

                    </div>
                </div>
            </div>


        </div>
        <div class="row mt-3">
            <div class="col-md-3 col-sm-12 "></div>
            <div class="col-md-3 col-sm-12 "></div>
            <div class="col-md-3 col-sm-12 "></div>

            <div class="col-md-3 col-sm-12 ">
                <div class="d-flex">
                    <a href="/Khachhang/Index" class="btn btn-light w-50">Hủy bỏ</a>
                    <button type="submit" class="btn btn-primary w-50" style="float: right;">
                        Lưu
                    </button>
                </div>
            </div>
        </div>
        
    </div>
    <div class="d-flex align-items-center justify-content-center mt-2">

       
        <div class="d-flex align-items-center justify-content-center mt-3">
            <label class="control-label mr-3">Ảnh hiện tại</label>
            <img src="~/Images/@Model.ExistingImage" class=" " height="300" width="300" style="border-radius:10px"
                 asp-append-version="true" alt="Không có ảnh" />
        </div>
        <div class="d-flex align-items-center justify-content-center mt-3">
            <label class="control-label mr-3">Ảnh vừa tải lên</label>
            <img id="ShowImage" src="#" class=" " height="300" width="300" style="border-radius:10px"
                 asp-append-version="true" alt="Không có ảnh" />
        </div>
    </div>

</form>

<!--<form asp-action="Edit" enctype="multipart/form-data" method="post">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>

    <div class="row">
        <input type="hidden" asp-for="Idkh" />
        <div class="form-group col-md-6">
            <label asp-for="Makh" class="control-label">Mã khách hàng</label>
            <input asp-for="Makh" class="form-control" />
            <span asp-validation-for="Makh" class="text-danger"></span>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="Tenkh" class="control-label">Tên khách hàng</label>
            <input asp-for="Tenkh" class="form-control" />
            <span asp-validation-for="Tenkh" class="text-danger"></span>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="Diachi" class="control-label">Địa chỉ</label>
            <input asp-for="Diachi" class="form-control" />
            <span asp-validation-for="Diachi" class="text-danger"></span>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="Sdt" class="control-label">Số điện thoại</label>
            <input asp-for="Sdt" class="form-control" />
            <span asp-validation-for="Sdt" class="text-danger"></span>
        </div>

        <div class="form-group col-md-6">
            <label class="control-label">Giới tính</label>
            <select asp-for="Gioitinh" class="form-control" id="exampleSelect2" required>
                <option>-- Chọn giới tính --</option>
                <option>Nam</option>
                <option>Nữ</option>
                <option>Khác</option>
            </select>
        </div>
        <div class="form-group col-md-6">
            <label asp-for="Masothue" class="control-label">Mã số thuế</label>
            <input asp-for="Masothue" class="form-control" />
            <span asp-validation-for="Masothue" class="text-danger"></span>
        </div>

        <div class="form-group col-md-6">
            <label asp-for="Ngaysinh" class="control-label">Ngày sinh</label>
            <input asp-for="Ngaysinh" type="date" class="form-control" />
            <span asp-validation-for="Ngaysinh" class="text-danger"></span>
        </div>

        <div class="form-group col-md-6">
            <label asp-for="Email" class="control-label">Email</label>
            <input asp-for="Email" class="form-control" />
            <span asp-validation-for="Email" class="text-danger"></span>
        </div>

        <div class="form-group col-md-6">
            <label asp-for="Ghichu" class="control-label">Ghi chú</label>
            <textarea asp-for="Ghichu" class="form-control"></textarea>
            <span asp-validation-for="Ghichu" class="text-danger"></span>
        </div>

        <div class="form-group col-md-6">
            <label asp-for="Hinhanh" class="control-label"></label>
            <div class="custom-file">
                <input asp-for="Hinhanh" class="custom-file-input" id="customFile">
                <label class="custom-file-label" for="customFile">Choose file</label>
            </div>
            <span asp-validation-for="Hinhanh" class="text-danger"></span>


        </div>

        <div class="form-group col-md-6 col-sm-12">
            <label asp-for="Hinhanh" class="control-label">Hình ảnh</label>

            <img src="~/Images/@Model.ExistingImage"
                 class=" "
                 height="200" width="200"
                 style="border-radius:10px"
                 asp-append-version="true" alt="No Image" />

        </div>
        <div class="form-group d-none">
            <label asp-for="Nvidsale" class="control-label"></label>
            <input asp-for="Nvidsale" class="form-control" />
            <span asp-validation-for="Nvidsale" class="text-danger"></span>
        </div>-->

        @*<div class="form-group d-none">
                <label asp-for="Accountidaccount" class="control-label"></label>
                <select asp-for="Accountidaccount" class="form-control" asp-items="ViewBag.Accountidaccount"></select>
                <span asp-validation-for="Accountidaccount" class="text-danger"></span>
            </div>*@


    <!--</div>


    <div class="text-center d-flex mt-3 col-12">
        @Html.ActionLink("Quay lại", "Index", "Khachhang", null, new { @class = "btn btn-cancel w-25" })

        <button class="btn btn-success w-50" type="submit">Lưu</button>

    </div>

</form>-->


<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('#ShowImage')
                    .attr('src', e.target.result)
                    .width(300)
                    .height(300);
            };

            reader.readAsDataURL(input.files[0]);
        }
    }
</script>


